<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <link rel="stylesheet" href="style.css" />
    <script src="/index.js" defer></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>体测成绩计算器</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
      (function () {
        const root = document.documentElement;
        const storageKey = "theme-preference";
        const supportsMatchMedia = typeof window.matchMedia === "function";
        const mediaQuery = supportsMatchMedia
          ? window.matchMedia("(prefers-color-scheme: dark)")
          : null;
        let storedTheme = null;

        try {
          storedTheme = localStorage.getItem(storageKey);
        } catch (error) {
          storedTheme = null;
        }

        const resolvedTheme =
          storedTheme === "light" || storedTheme === "dark"
            ? storedTheme
            : "auto";

        const prefersDark = mediaQuery ? mediaQuery.matches : false;

        if (resolvedTheme === "dark") {
          root.setAttribute("data-theme", "dark");
          root.style.colorScheme = "dark";
        } else if (resolvedTheme === "light") {
          root.setAttribute("data-theme", "light");
          root.style.colorScheme = "light";
        } else {
          root.removeAttribute("data-theme");
          root.style.colorScheme = prefersDark ? "dark" : "light";
        }

        root.dataset.appliedTheme = resolvedTheme;
      })();
    </script>
  </head>
  <body class="min-h-screen bg-slate-100 text-slate-900">
    <main class="mx-auto flex min-h-screen max-w-5xl flex-col gap-8 px-4 py-8">
      <div class="flex justify-end">
        <button
          id="themeToggle"
          type="button"
          class="inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:border-indigo-500 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          aria-label="切换主题"
        >
          跟随系统
        </button>
      </div>
      <header class="text-center">
        <h1 class="text-3xl font-semibold text-slate-900 sm:text-4xl">
          大学生体测成绩计算器
        </h1>
      </header>

      <section class="rounded-xl bg-white p-6 shadow">
        <h2 class="text-lg font-medium text-slate-800">基本信息与成绩录入</h2>
        <div class="mt-4 grid gap-4 sm:grid-cols-2">
          <div class="flex flex-col gap-2 sm:col-span-2">
            <span class="text-sm font-medium text-slate-700">性别</span>
            <div class="flex flex-wrap gap-4 text-sm" role="radiogroup">
              <label class="flex items-center gap-2">
                <input
                  type="radio"
                  name="sex"
                  value="male"
                  checked
                  onclick="change()"
                  class="h-4 w-4 border-slate-300 text-indigo-600 focus:ring-indigo-500"
                />
                <span>男生</span>
              </label>
              <label class="flex items-center gap-2">
                <input
                  type="radio"
                  name="sex"
                  value="female"
                  onclick="change()"
                  class="h-4 w-4 border-slate-300 text-indigo-600 focus:ring-indigo-500"
                />
                <span>女生</span>
              </label>
            </div>
          </div>

          <div class="flex flex-col gap-2 sm:col-span-2">
            <span class="text-sm font-medium text-slate-700">年级</span>
            <div class="flex flex-wrap gap-4 text-sm" role="radiogroup">
              <label class="flex items-center gap-2">
                <input
                  type="radio"
                  name="grades"
                  value="grade1"
                  checked
                  class="h-4 w-4 border-slate-300 text-indigo-600 focus:ring-indigo-500"
                />
                <span>大一 / 大二</span>
              </label>
              <label class="flex items-center gap-2">
                <input
                  type="radio"
                  name="grades"
                  value="grade2"
                  class="h-4 w-4 border-slate-300 text-indigo-600 focus:ring-indigo-500"
                />
                <span>大三 / 大四</span>
              </label>
            </div>
          </div>

          <div class="flex flex-col gap-2">
            <label for="height" class="text-sm font-medium text-slate-700"
              >身高 (m)</label
            >
            <input
              id="height"
              type="text"
              name="heights"
              placeholder="1.75"
              onkeyup="only_num(this)"
              onblur="only_num(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div class="flex flex-col gap-2">
            <label for="weight" class="text-sm font-medium text-slate-700"
              >体重 (kg)</label
            >
            <input
              id="weight"
              type="text"
              name="weights"
              placeholder="68"
              onkeyup="only_num(this)"
              onblur="only_num(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div class="flex flex-col gap-2">
            <label for="breath" class="text-sm font-medium text-slate-700"
              >肺活量 (毫升)</label
            >
            <input
              id="breath"
              type="text"
              name="breaths"
              placeholder="3500"
              onkeyup="onlyNumber(this)"
              onblur="onlyNumber(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div class="flex flex-col gap-2">
            <label for="shortrun" class="text-sm font-medium text-slate-700"
              >50 米跑 (秒)</label
            >
            <input
              id="shortrun"
              type="text"
              name="shortruns"
              placeholder="7.2"
              onkeyup="only_num(this)"
              onblur="only_num(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div class="flex flex-col gap-2">
            <label for="reach" class="text-sm font-medium text-slate-700"
              >坐位体前屈 (cm)</label
            >
            <input
              id="reach"
              type="text"
              name="reachs"
              placeholder="15.0"
              onkeyup="only_num(this)"
              onblur="only_num(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div class="flex flex-col gap-2">
            <label for="jump" class="text-sm font-medium text-slate-700"
              >立定跳远 (cm)</label
            >
            <input
              id="jump"
              type="text"
              name="jumps"
              placeholder="220"
              onkeyup="onlyNumber(this)"
              onblur="onlyNumber(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div id="pullup" class="flex flex-col gap-2">
            <label for="pullupInput" class="text-sm font-medium text-slate-700"
              >引体向上 (次)</label
            >
            <input
              id="pullupInput"
              type="text"
              name="pullups"
              placeholder="12"
              onkeyup="onlyNumber(this)"
              onblur="onlyNumber(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div id="situp" class="hidden flex flex-col gap-2">
            <label for="situpInput" class="text-sm font-medium text-slate-700"
              >1 分钟仰卧起坐 (次)</label
            >
            <input
              id="situpInput"
              type="text"
              name="situps"
              placeholder="40"
              onkeyup="onlyNumber(this)"
              onblur="onlyNumber(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div id="1000run" class="flex flex-col gap-2">
            <label for="run1000Input" class="text-sm font-medium text-slate-700"
              >1000 米跑 (分.秒)</label
            >
            <input
              id="run1000Input"
              type="text"
              name="1000runs"
              placeholder="3.45"
              onkeyup="only_num(this)"
              onblur="only_num(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <div id="800run" class="hidden flex flex-col gap-2">
            <label for="run800Input" class="text-sm font-medium text-slate-700"
              >800 米跑 (分.秒)</label
            >
            <input
              id="run800Input"
              type="text"
              name="800runs"
              placeholder="3.30"
              onkeyup="only_num(this)"
              onblur="only_num(this)"
              class="rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"
            />
          </div>

          <input type="hidden" name="BMIs" />
        </div>
        <div class="mt-6 flex flex-wrap items-center justify-between gap-3">
          <button
            id="compute"
            type="button"
            onclick="calculate()"
            class="rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2"
          >
            计算成绩
          </button>
          <div class="text-sm text-slate-600">
            提示： <code>3.45</code> 表示 3 分 45 秒。
          </div>
        </div>
      </section>

      <section class="rounded-xl bg-white p-6 shadow">
        <h2 class="text-lg font-medium text-slate-800">成绩汇总</h2>
        <div class="mt-4 overflow-x-auto">
          <table
            class="min-w-full table-fixed border border-slate-200 text-left text-sm"
          >
            <thead class="bg-slate-50 text-slate-700">
              <tr>
                <th
                  class="w-1/3 border-b border-slate-200 px-4 py-3 font-medium"
                >
                  单项指标
                </th>
                <th
                  class="w-1/5 border-b border-slate-200 px-4 py-3 font-medium"
                >
                  成绩
                </th>
                <th
                  class="w-1/5 border-b border-slate-200 px-4 py-3 font-medium"
                >
                  得分
                </th>
                <th
                  class="w-1/5 border-b border-slate-200 px-4 py-3 font-medium"
                >
                  等级
                </th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-200 text-slate-700">
              <tr>
                <td class="px-4 py-3">BMI (kg/m<sup>2</sup>)</td>
                <td id="bmi-value" class="px-4 py-3 text-slate-600">-</td>
                <td id="bmi-score" class="px-4 py-3">-</td>
                <td id="bmi-level" class="px-4 py-3">-</td>
              </tr>
              <tr>
                <td class="px-4 py-3">肺活量 (毫升)</td>
                <td id="breath-value" class="px-4 py-3 text-slate-600">-</td>
                <td id="breath-score" class="px-4 py-3">-</td>
                <td id="breath-level" class="px-4 py-3">-</td>
              </tr>
              <tr>
                <td class="px-4 py-3">50m 跑</td>
                <td id="sprint-value" class="px-4 py-3 text-slate-600">-</td>
                <td id="sprint-score" class="px-4 py-3">-</td>
                <td id="sprint-level" class="px-4 py-3">-</td>
              </tr>
              <tr>
                <td class="px-4 py-3">坐位体前屈 (cm)</td>
                <td id="sitreach-value" class="px-4 py-3 text-slate-600">-</td>
                <td id="sitreach-score" class="px-4 py-3">-</td>
                <td id="sitreach-level" class="px-4 py-3">-</td>
              </tr>
              <tr>
                <td class="px-4 py-3">立定跳远 (cm)</td>
                <td id="longjump-value" class="px-4 py-3 text-slate-600">-</td>
                <td id="longjump-score" class="px-4 py-3">-</td>
                <td id="longjump-level" class="px-4 py-3">-</td>
              </tr>
              <tr>
                <td class="px-4 py-3">引体向上 / 1min 仰卧起坐</td>
                <td id="strength-value" class="px-4 py-3 text-slate-600">-</td>
                <td id="strength-score" class="px-4 py-3">-</td>
                <td id="strength-level" class="px-4 py-3">-</td>
              </tr>
              <tr>
                <td class="px-4 py-3">1000m / 800m</td>
                <td id="endurance-value" class="px-4 py-3 text-slate-600">-</td>
                <td id="endurance-score" class="px-4 py-3">-</td>
                <td id="endurance-level" class="px-4 py-3">-</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div
          class="mt-6 grid gap-3 rounded-lg border border-indigo-100 bg-indigo-50 px-4 py-3 sm:grid-cols-3"
        >
          <div class="text-sm text-slate-600">
            附加分：<span
              id="addition-score"
              class="font-semibold text-indigo-700"
              >0</span
            >
          </div>
          <div class="text-sm text-slate-600">
            总分：<span
              id="result"
              class="text-lg font-semibold text-indigo-700"
              >0.0</span
            >
          </div>
          <div class="text-sm text-slate-600">
            综合等级：<span
              id="total-level"
              class="font-semibold text-indigo-700"
              >-</span
            >
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
